<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text auf Bild</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Text Overlay to Image</h1>
        
        <form id="imageForm" enctype="multipart/form-data">
            <div class="form-group">
                <label>Bild hochladen:</label>
                <input type="file" name="image" id="imageFile" accept="image/*">
            </div>

            {% if sample_images %}
            <div class="form-group">
                <label>Oder w√§hle ein Sample-Bild:</label>
                <div class="sample-images">
                    {% for img in sample_images %}
                    <img src="/sample_image/{{ img }}" data-name="{{ img }}" onclick="selectSample(this)">
                    {% endfor %}
                </div>
                <input type="hidden" name="sample_image" id="selectedSample">
            </div>
            {% endif %}

            <div class="form-group">
                <label for="text">Text (mehrere Zeilen m√∂glich):</label>
                <textarea id="text" name="text" rows="3" required>Dein Text hier
Zeile 2
Zeile 3</textarea>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="font_name">Schriftart:</label>
<select id="font_name" name="font_name">

    {% for font in fonts %}

    <option value="{{ font.name }}" {% if loop.first %}selected{% endif %}>{{ font.name }}</option>

    {% endfor %}

    <option value="">System Standard (Fallback)</option>

</select>


                </div>

                <div class="form-group">
                    <label for="font_size">Schriftgr√∂√üe:</label>
                    <input type="number" id="font_size" name="font_size" value="40" min="10" max="200">
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="text_color">Textfarbe:</label>
                    <input type="color" id="text_color" name="text_color" value="#FFFFFF">
                </div>

                <div class="form-group">
                    <label for="position">Position:</label>
                    <select id="position" name="position">
                        <option value="center">Mitte</option>
                        <option value="top">Oben</option>
                        <option value="bottom">Unten</option>
                        <option value="top-left">Oben Links</option>
                        <option value="top-right">Oben Rechts</option>
                        <option value="bottom-left">Unten Links</option>
                        <option value="bottom-right">Unten Rechts</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="text_align">Textausrichtung:</label>
                <select id="text_align" name="text_align">
                    <option value="center">Zentriert</option>
                    <option value="left">Linksb√ºndig</option>
                    <option value="right">Rechtsb√ºndig</option>
                </select>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="x_offset">X-Versatz (px):</label>
                    <input type="number" id="x_offset" name="x_offset" value="0">
                </div>

                <div class="form-group">
                    <label for="y_offset">Y-Versatz (px):</label>
                    <input type="number" id="y_offset" name="y_offset" value="0">
                </div>
            </div>

            <h2>üé® Hintergrund-Box</h2>

            <div class="form-group">
                <label for="box_width_percent">Box-Breite (% der Bildbreite):</label>
                <input type="range" id="box_width_percent" name="box_width_percent" value="80" min="20" max="100" oninput="document.getElementById('widthValue').textContent = this.value + '%'">
                <span id="widthValue" class="slider-value">80%</span>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="bg_color">Box-Farbe:</label>
                    <input type="color" id="bg_color" name="bg_color" value="#000000">
                </div>

                <div class="form-group">
                    <label for="bg_opacity">Transparenz (0-255):</label>
                    <input type="range" id="bg_opacity" name="bg_opacity" value="128" min="0" max="255" oninput="document.getElementById('opacityValue').textContent = this.value">
                    <span id="opacityValue" class="slider-value">128</span>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="bg_blur">Blur-St√§rke (0-30):</label>
                    <input type="range" id="bg_blur" name="bg_blur" value="10" min="0" max="30" oninput="document.getElementById('blurValue').textContent = this.value">
                    <span id="blurValue" class="slider-value">10</span>
                </div>

                <div class="form-group">
                    <label for="bg_radius">Ecken-Radius (px):</label>
                    <input type="number" id="bg_radius" name="bg_radius" value="15" min="0" max="100">
                </div>
            </div>

            <div class="form-group">
                <label for="bg_padding">Box-Padding (px):</label>
                <input type="number" id="bg_padding" name="bg_padding" value="20" min="0" max="100">
            </div>

            <button type="submit">üëÅÔ∏è Vorschau erstellen</button>
        </form>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Bild wird verarbeitet...</p>
        </div>

        <div id="preview">
            <h2>Vorschau:</h2>
            <img id="previewImg" src="" alt="Preview">
            <button id="downloadBtn">‚¨áÔ∏è Bild herunterladen</button>
        </div>
<div class="url-box" id="urlBox">

    <label>Preset URL:</label>

    <input type="text" id="shareUrl" readonly>

</div>


        <!-- Sample Upload Section -->
        <div class="admin-section">
            <h3>üîí Sample-Bild hochladen (Admin)</h3>
            <form id="uploadSampleForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="sample_file">Bild ausw√§hlen:</label>
                    <input type="file" id="sample_file" name="sample_file" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="upload_password">Passwort:</label>
                    <input type="password" id="upload_password" name="password" required>
                </div>
                <button type="submit">üì§ Sample hochladen</button>
            </form>
            <div id="uploadMessage" class="upload-message"></div>
        </div>

    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
